# Git Seek

||
|:-:|
| <video src="https://github.com/user-attachments/assets/914f93e5-18c5-4c5c-b559-2637b030bf1f"> |

<!--toc:start-->
- [Git Seek](#git-seek)
  - [概要](#概要)
  - [動作環境](#動作環境)
  - [ビルド・操作手順](#ビルド操作手順)
    - [ビルド手順](#ビルド手順)
    - [操作手順](#操作手順)
  - [主な技術選定](#主な技術選定)
    - [コンセプト（なぜこの選択か）](#コンセプトなぜこの選択か)
  - [こだわった点・工夫した点](#こだわった点工夫した点)
    - [アプリの機能](#アプリの機能)
    - [チーム開発](#チーム開発)
  - [使用したAI機能・ツール](#使用したai機能ツール)
  - [資料・ドキュメント](#資料ドキュメント)
  - [おわりに](#おわりに)
<!--toc:end-->

## 概要

開発者によって手本となるよきリポジトリに出会えるように GitHub リポジトリを検索・参照するモバイルアプリ（Android）です。
画面は「リポジトリ検索画面」と「リポジトリ詳細画面」と「ブックマーク画面」の 3 画面で構成します。

## 動作環境

- **JDK**: 11
- **Android Studio**: Android Studio Otter | 2025.2.1 Patch 1
- **OSバージョン**: Android 12
- **端末情報** Pixel 5a
- **ビルドツール**: Gradle 8.13

## ビルド・操作手順

### ビルド手順

1. リポジトリをクローン
2. Android Studioでプロジェクトを開く
3. `local.properties` に GitHub トークンを追加
4. プロジェクトを同期・ビルド
5. エミュレータまたは実機でアプリを実行

### 操作手順

- アプリを起動
- 検索バーにキーワードを入力してリポジトリを検索
- 検索結果からリポジトリをタップして詳細を表示
- 必要に応じてブックマーク機能を利用

> [!NOTE]
> アプリを動作させるには 「GitHub API トークン」、「GitHub APIのURL」が必要です。
> APIトークンは個人のGitHubアカウントから取得し、プロジェクト直下にある`sample.local.properties`を参考に
`local.properties`を作成してください。
>
> ```sh
> cp sample.local.properties local.properties
>   ```

## 主な技術選定

- 言語: Kotlin
- UI: Jetpack Compose
- アーキテクチャ: MVI + Clean-ish 層構成
- ネットワーク: Ktor
- 非同期: Kotlin Coroutines + Flow
- ページング: Paging 3
- 画像: Coil
- 永続化: Room
- DI: Hilt
- 静的解析・整形: detekt
- テスト: JUnit
- シークレット: secrets-gradle-plugin
- パース: Kotlin serialization
- エラーハンドリング: kotlin-result

### コンセプト（なぜこの選択か）

基本的にオーバーエンジニアリングにならないように誰もが理解しやすく、かつ拡張性のある構成を目指しました。

- MVI + Clean-ish 構成:
  - MVI
    - 単方向データフローで状態管理が明確になり、SSOT(Single Source of Truth) を保ちやすいため
  - Clean-ish
    - 機能拡張やチーム開発を見越した責務分離が容易なため
    - ドメイン層に設けることでビジネスロジックの独立性が高まり、テスト容易性が向上するため
    - DDDに影響を受けたアーキテクチャのなかでも、比較的学習コストが低く、過度に複雑化しないため
      - ドメインに問い合わせを行うような厳密な設計（Value-Object, Domain Service）がない、
- Ktor
  - KMP対応や軽量性、将来的なサーバーサイド展開を見据えてRetrofitではなくKtorを採用
  - Stale-While-Revalidateなど、一部の高度なキャッシュ制御は自前実装となるが、GitHub検索APIの利用においては問題にならないため

- Paging3
  - GitHub検索APIのページネーションに自然に対応でき、Paging3 の差分更新が高速なため。
  - 公式サポート・Composeとの親和性や拡張性・保守性を考えても有利なため。

- Room
  - ローカル永続化のデファクトスタンダードであり、学習コストが低いため。

- Coil
  - Composeと親和性が高く軽量であり、Kotlin Coroutines に対応しているため。
  - 画像のキャッシュ戦略が自動で行われるため、開発工数を削減できる。

- kotlin-result
  - ROP（Railway Oriented Programming）により、例外をタイプセーフに扱うことができるため。
  - ドメイン層、データ層でのエラータイプ分けが容易になるため。
  - 例外処理よりも「回復可能なエラー」「致命的なエラー」を明確に切り分けることができ、可読性と保守性が向上するため。
    - 回復可能なエラー: エラーダイアログ表示、リトライなど
    - 致命的なエラー: クラッシュレポート送信、アプリ終了など

- kotlinx.serialization
  - Kotlin公式のシリアライゼーションライブラリであり、Kotlinデータクラスとの親和性が高いため。
  - KMP対応や軽量性、拡張性を考慮してGsonやMoshiより有利なため。
  - Ktorとの統合もスムーズであるため。

- detekt
  - Kotlin向け静的解析ツールとしてデファクトスタンダードであり、設定が容易なため。
  - また、ktlintと連携してコード整形も自動化できるため。

- secrets-gradle-plugin
  - APIトークンなどのシークレット情報を `local.properties` で安全に管理できるため。

※プロジェクトによって技術選定が分かれそうな部分のみ抜粋して記載。

## こだわった点・工夫した点

### アプリの機能

- 検索の初期表示
  - 初期表示で、人気リポジトリの一覧を表示することで、ユーザーがすぐにアプリの価値を体験できるように工夫

- 追加ページ読み込みインジケータ
  - ユーザーに対してスクロール中に追加でページ読み込み中であることを明示するため、インジケータを実装

- pull-to-refreshによるページ再読み込み
  - ユーザーが自然にページ再読み込みできるように、pull-to-refreshを実装

- ページングのパフォーマンス改善
  - 短期的なmax-ageキャッシュとETag条件付きリクエストの組み合わせにより、ページングのパフォーマンスを改善

- ブックマーク削除確認ダイアログ
  - 誤操作でブックマークを削除してしまうことを防ぐため、確認ダイアログを実装

### チーム開発

- コミット・ブランチ運用ルール
  - チームでの開発を円滑に進めるため、最低限のコミットメッセージルールとブランチ運用ルールを策定

- 静的解析導入によるコスト削減
  - pre-commitに設定したスクリプト用意により、静的解析導入のコストを削減

## 使用したAI機能・ツール

- Devin
  - Deep WikiにAPIの仕様把握

- GitHub Copilot
  - PRレビュー機能
  - コード補完
  - コードの雛形生成
    - 主に以下の部分で使用しています
      - データモデル・エンティティの定義
      - Repository 層の実装
      - UseCase 層の実装
      - DI 設定
  - ドキュメント作成

## 資料・ドキュメント

- [実装計画書](docs/impl_plan.md)
- [簡易設計書](docs/design.md)
- [チーム開発ガイドライン](docs/contributing.md)

## おわりに

プロジェクトを探索していただき、ありがとうございました 🙌

本リポジトリにもあなたが`Seek`していたものはありましたでしょうか？  
Git Seek があなたの開発ライフを少しでも豊かにできれば幸いです。

@novum-d
